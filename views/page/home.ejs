<% layout("/layouts/boilerplate.ejs") %>

<!-- Hero section -->
<div class="name-container">
  <div class="n-artist-name">
    <p class="n-paragraph">HARMONI<span class="change-font">Sh</span></p>
    <span class="span-add-fill">
      <p>remixes</p>
    </span>
    <span class="span-add-fill">
      <p>typebeats</p>
    </span>
  </div>
  <div class="n-by-name">
    <span class="span-add-fill">
      <p>music</p>
    </span>
    <p class="n-paragraph">by</p>
    <span class="span-add-fill">
      <p>explore</p>
    </span>
  </div>
  <div class="n-name-name">
    <div class="n-info">
      <div class="n-info-div">
        <hr />
        <div class="n-info-music">
          <p>total typebeats</p>
          <p class="go-to-end"><%= songs.length %></p>
        </div>
        <hr />
        <div class="n-info-music">
          <span><p>total remixes</p></span>
          <span><p class="go-to-end"><%= remix.length %></p></span>
        </div>
        <hr />
      </div>
    </div>
    <div class="my-name-div">
      <p class="n-paragraph">nilanshu garhewal</p>
    </div>
  </div>
</div>

<!--  -->

<div class="image-container">
  <div class="image-box">
    <img
      class="front-images"
      src="https://i.pinimg.com/474x/c2/c3/43/c2c3436402b4015f26821fa9cdfe365d.jpg"
    />

    <div class="info-box">Coming Soon (Prod. Harmonish)</div>
  </div>
  <div class="image-box">
    <img
      class="front-images"
      src="https://i.pinimg.com/474x/59/f8/69/59f8694cb223061869e203bb38c059ed.jpg"
    />
    <div class="info-box">Coming Soon (Prod. Harmonish)</div>
  </div>
  <div class="image-box">
    <img
      class="front-images"
      src="https://i.pinimg.com/474x/27/b1/05/27b105523f4f52ce94aaa04056121b9a.jpg"
    />

    <div class="info-box">Coming Soon (Prod. Harmonish)</div>
  </div>
  <div class="image-box">
    <img
      class="front-images"
      src="https://i.pinimg.com/474x/d7/dc/24/d7dc245537dd26b42116ffb7ff70eff1.jpg"
    />
    <div class="info-box">Coming Soon (Prod. Harmonish)</div>
  </div>
  <div class="image-box">
    <img
      class="front-images"
      src="https://i.pinimg.com/474x/23/d2/0d/23d20d23c19e863ffcc0516baeb6f3f4.jpg"
    />

    <div class="info-box">Coming Soon (Prod. Harmonish)</div>
  </div>
  <div class="image-box">
    <img
      class="front-images"
      src="https://i.pinimg.com/474x/08/3e/16/083e166805adbdf79763ade148f8bb13.jpg"
    />
    <div class="info-box">Coming Soon (Prod. Harmonish)</div>
  </div>
</div>

<!-- Hero section -->
<%- include("../includes/aboutSection.ejs") %>

<div class="project-section">
  <div class="project-name side-slide-animation-2">
    <div>
      <div class="project-name-container">
        <span class="material-symbols-sharp bolt-icon"> bolt </span>
        <!-- <hr /> -->
        <span class="project-name-span">
          <p>BROWSE</p>
        </span>
      </div>

      <!-- <div class="view-project-div">
        <span class="material-symbols-sharp"> arrow_right_alt </span>
        <p class="p-view-all">All View</p>
      </div> -->
    </div>

    <div class="view-project-div">
      <span class="material-symbols-sharp"> arrow_right_alt </span>
      <p class="p-view-remix">View Remixes</p>
    </div>
  </div>

  <!-- Main project -->

  <div class="music-projects">
    <!-- <div class="project-section-names">
      <div><p>Name</p></div>

      <div>
        <p>Gerne</p>
      </div>

      <div><p>Tags</p></div>

      <div>
        <p>Videos</p>
      </div>
    </div> -->

    <div class="music-typebeat-details">
      <% let counter = 1; %> <% songs.forEach(song => { %>
      <section class="music-sep-section">
        <div>
          <iframe
            class="lazy-iframe"
            src="https://www.youtube.com/embed/<%= song.songLink %>"
            title="YouTube video player"
            frameborder="0"
            allowfullscreen
          >
          </iframe>
        </div>
        <div><p><%= counter++ %>. <%= song.songTitle %></p></div>

        <div>
          <p class="mini">Genre: <b><%= song.songGenre %></b></p>
        </div>

        <div>
          <p class="mini">Tags: <b><%= song.songTags %></b></p>
        </div>
      </section>
      <% }); %>
    </div>

    <div class="music-remix-details">
      <% let number = 1; %> <% remix.forEach(remix => { %>
      <section class="music-sep-section">
        <div>
          <iframe
            class="lazy-iframe"
            src="https://www.youtube.com/embed/<%= remix.songLink %>"
            title="YouTube video player"
            frameborder="0"
            allowfullscreen
          >
          </iframe>
        </div>
        <div><p><%= number++ %>. <%= remix.songTitle %></p></div>

        <div>
          <p class="mini">Genre: <b><%= remix.songGenre %></b></p>
        </div>

        <div>
          <p class="mini">Tags: <b><%= remix.songTags %></b></p>
        </div>
      </section>
      <% }); %>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    let iframes = document.querySelectorAll(".lazy-iframe");

    if (iframes.length === 0) {
      console.error("No iframes found with class 'lazy-iframe'");
      return;
    }

    let observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            let iframe = entry.target;
            let src = iframe.getAttribute("data-src");

            if (!iframe.src) {
              iframe.src = src; // Assign real video URL
              console.log("Loaded:", src);
            }

            observer.unobserve(iframe); // Stop observing once loaded
          }
        });
      },
      { threshold: 0.5 }
    );

    iframes.forEach((iframe) => observer.observe(iframe));
  });
</script>

<!--  -->
<%- include("../includes/faqSection.ejs") %>
